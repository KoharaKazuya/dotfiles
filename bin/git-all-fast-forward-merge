#!/bin/sh

set -eu

# 未コミットの変更ファイルがあれば終了
git _modified-files-guard

# 現在ブランチを記憶
current_branch=$(git current-branch)

for tb in $(git other-branches)
do
  git co $tb
  git _processing 'aff' "Merging $tb" git merge --ff-only $current_branch || :
done

# コマンド開始時のブランチに戻す
git co $current_branch
