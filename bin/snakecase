#!/usr/bin/env ruby

# 引数が - のみの場合
if ARGV.size() == 1 and ARGV[0] == '-'
  raw_string = STDIN.read()
# 引数が文字列の場合
else
  raw_string = ARGV.join(' ')
end

# 与えられた文字列をスネークケースに
snake = raw_string
  .gsub(/([A-Z]+)([A-Z][a-z])/, '\1_\2')
  .gsub(/([a-z\d])([A-Z])/, '\1_\2')
  .tr('-', '_')
  .downcase()

puts snake
